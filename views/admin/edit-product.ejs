<!DOCTYPE HTML>
<html lang="en">


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/page-form-product-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:33:31 GMT -->

<head>
    <meta charset="utf-8">
    <title>Dude Admin</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/assets/imgs/theme/logo1.png">
    <!-- Template CSS -->
    <link href="/admin-assets/css/main.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="/admin/dashboard" class="brand-wrap">
                <img src="/assets/imgs/theme/logo1.png" class="logo" alt="Dashboard">
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i>
                </button>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item">
                    <a class="menu-link" href="/admin/dashboard"> <i class="icon material-icons md-home"></i>
                        <span class="text">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item has-submenu ">
                    <a class="menu-link" href="/admin/product"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Products</span>
                    </a>
                    <div class="submenu">
                        <a href="/admin/product">Product List</a>
                    </div>
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">categories</span>
                    </a>
                    <div class="submenu">
                        <a href="/admin/category" class="active">Category List</a>
                    </div>
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="/admin/order"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text">Orders</span>
                    </a>
                    <div class="submenu">
                        <a href="/admin/order">Order list</a>

                    </div>
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="page-sellers-cards.html"> <i class="icon material-icons md-store"></i>
                        <span class="text">Users</span>
                    </a>
                    <div class="submenu">

                        <a href="/admin/userlist">Users list</a>

                    </div>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/coupon"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text">Coupons</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/adminOffers">
                        <i class="icon material-icons md-local_offer"></i>
                        <span class="text"> Offer </span>
                    </a>
                </li>

            </ul>
            <hr>

            <br>
            <br>
        </nav>
    </aside>
    <main class="main-wrap">
        <header class="main-header navbar">

            <div class="col-nav ms-auto">
                <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"> <i
                        class="material-icons md-apps"></i> </button>
                <ul class="nav">

                    <li class="nav-item">
                        <a class="nav-link btn-icon darkmode" href="#"> <i class="material-icons md-nights_stay"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="requestfullscreen nav-link btn-icon"><i
                                class="material-icons md-cast"></i></a>
                    </li>
                    <li class="dropdown nav-item">
                        <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownLanguage"
                            aria-expanded="false"><i class="material-icons md-public"></i></a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownLanguage">
                            <a class="dropdown-item text-brand" href="#"><img src="assets/imgs/theme/flag-us.png"
                                    alt="English">English</a>
                            <a class="dropdown-item" href="#"><img src="assets/imgs/theme/flag-fr.png"
                                    alt="Français">Français</a>
                            <a class="dropdown-item" href="#"><img src="assets/imgs/theme/flag-jp.png"
                                    alt="Français">日本語</a>
                            <a class="dropdown-item" href="#"><img src="assets/imgs/theme/flag-cn.png"
                                    alt="Français">中国人</a>
                        </div>
                    </li>
                    <li class="dropdown nav-item">
                        <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount"
                            aria-expanded="false">Admin</a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">

                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="/admin/logout"><i
                                    class="material-icons md-exit_to_app"></i>Logout</a>
                        </div>
                    </li>
                </ul>
            </div>
        </header>
        <section class="new-product p-md-5" style="margin-top: -30px;">
            <div class="h3 fw-bold text-second px-4">

                <br><span>Edit Product</span>
            </div>
            <!-- Flash Messages -->
            <% if (success.length> 0) { %>
                <div class="alert alert-success">
                    <% success.forEach(function(message) { %>
                        <p>
                            <%= message %>
                        </p>
                        <% }) %>
                </div>
                <% } %>

                    <% if (error.length> 0) { %>
                        <div class="alert alert-danger">
                            <% error.forEach(function(message) { %>
                                <p>
                                    <%= message %>
                                </p>
                                <% }) %>
                        </div>
                        <% } %>
                            <form method="post" class="row d-flex justify-content-center" enctype="multipart/form-data"
                                action="/admin/update-product">
                                <section class="right-section mt-1 col-md-6 col-md-6 p-4">
                                    <div class="form-group mb-4">
                                        <label for="" class="fw-bold mb-2">Product Name</label>
                                        <input type="text" name="product_name" value="<%= obj.product_name %>"
                                            class="form-control">
                                    </div>
                                    <div class="row mb-4">
                                        <div class="form-group col-md-6">
                                            <label for="" class="fw-bold mb-2">Brand Name</label>
                                            <input type="text" name="brand_name" value="<%= obj.brand_name %>"
                                                class="form-control">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="" class="fw-bold mb-2">Color</label>
                                            <input type="text" name="color" value="<%= obj.color %>"
                                                class="form-control">
                                        </div>


                                        <input type="hidden" name="id" value="<%= obj._id %>" class="form-control">

                                        <div class="form-group mb-4">
                                            <label for="" class="fw-bold mb-2">Size and Stock</label>
                                            <div id="size-stock-container">
                                                <% obj.sizes.forEach(function(sizeStock) { %>
                                                    <div class="size-stock-item d-flex mb-2">
                                                        <input type="text" name="sizes[]" value="<%= sizeStock.size %>"
                                                            placeholder="Size" class="form-control me-2">
                                                        <input type="number" name="stocks[]"
                                                            value="<%= sizeStock.stock %>" placeholder="Stock"
                                                            class="form-control me-2">
                                                        <button type="button"
                                                            class="btn btn-danger btn-remove-size-stock">Remove</button>
                                                    </div>
                                                    <% }) %>
                                            </div>
                                            <button type="button" id="add-size-stock" class="btn btn-secondary mt-2">Add
                                                Size</button>
                                        </div>
                                        <div class="form-group col-md-6 d-flex flex-column">
                                            <label for="" class="fw-bold mb-2">Category Name</label>
                                            <select class="form-select" name="category">
                                                <option value="<%= obj.category._id %>">
                                                    <%= obj.category.cat_name %>
                                                </option>
                                                <% category.forEach(cat=> { %>
                                                    <option value="<%= cat._id %>">
                                                        <%= cat.cat_name %>
                                                    </option>
                                                    <% }); %>
                                            </select>
                                        </div>
                                        <div class="form-group col-md-6 d-flex mt-2 flex-column">
                                            <label class="fw-bold" for="exampleFormControlInput1">Status</label>
                                            <select class="form-select" name="status"
                                                aria-label="Default select example">
                                                <% if (obj.status) { %>
                                                    <option value="true">List</option>
                                                    <option value="false">Unlist</option>
                                                    <% } else { %>
                                                        <option value="false">Unlist</option>
                                                        <option value="true">List</option>
                                                        <% } %>
                                            </select>
                                        </div>

                                    </div>
                                    <div class="row mb-4">
                                        <div class="form-group col-md-6">
                                            <label for="" class="fw-bold mb-2">Actual Price</label>
                                            <input type="number" name="prod_price" value="<%= obj.actual_price %>"
                                                class="form-control">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="" class="fw-bold mb-2">Selling Price</label>
                                            <input type="number" name="sellig_price" value="<%= obj.selling_price %>"
                                                class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-floating me-md-5">
                                        <label class="form-label fw-bold" for="form4Example3">Description</label>
                                        <br>
                                        <textarea class="form-control mt-4 text-area" rows="5" name="description"
                                            style="min-height:150px !important;"
                                            required><%= obj.description %></textarea>
                                    </div>
                                </section>
                                <section class="left-secton mt-5 col-md-6 p-3">
                                    <div class="card mb-3 ">
                                        <div class="card-body">
                                            <div class="primary-img row">
                                                <label for="inputtext3"
                                                    class="col-sm-2 col-md-12 col-form-label mb-2">Primary Image</label>
                                                <div class="d-flex align-items-center jsutify-content-center"><img
                                                        src="/admin-assets/imgs/items/<%= obj.primary_image.name %>"
                                                        class="border rounded" id="img<%= obj.primary_image.name %>"
                                                        alt="" style="width: 4rem;">
                                                    <div class="col-sm-10 col-md-9">
                                                        <input type="hidden" class="form-control mb-2 prod-img"
                                                            value="<%= obj.primary_image._id %>" name="id_primary_img">
                                                        <input type="file" class="form-control "
                                                            id="<%= obj.primary_image.name %>"
                                                            accept=".jpg,.jpeg,.png,.webp,.svg"
                                                            onchange="previewImg(event)" name="primaryImage">
                                                        <i class="fa-regular fa-circle-xmark m-3"
                                                            style="cursor: pointer;"
                                                            onclick="deleteImg('<%= obj.primary_image._id %>', 'primary_img')"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="secondary-img row">
                                                <div class="d-flex align-items-center ">
                                                    <label for="inputtext3" class="col-form-label mb-2">secondary
                                                        Images</label>
                                                </div>
                                                <% obj.secondary_images.forEach(secImg=> { %>
                                                    <img src="/admin-assets/imgs/items/<%= secImg.name %>"
                                                        class="border rounded mt-1" alt="" id="img<%= secImg.name %>"
                                                        style="width: 5rem;">
                                                    <div class="col-sm-10 col-md-9 mt-3">
                                                        <input type="file" class="form-control mb-2 "
                                                            accept=".jpeg,.png,.jpg,.webp,.svg" id="<%= secImg.name %>"
                                                            onchange="previewImg(event)" name="images">
                                                        <input type="hidden" class="form-control mb-2 "
                                                            value="<%= secImg._id %>" name="id_secondary_img">
                                                        <i class="fa-regular fa-circle-xmark m-3"
                                                            style="cursor: pointer;"
                                                            onclick="deleteImg('<%= secImg._id %>', 'secondary_img')"></i>
                                                    </div>
                                                    <% }); %>
                                                        <div
                                                            class="d-flex align-items-center secondary-img jsutify-content-center">
                                                        </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <button type="reset" class="btn button-cancel py-3" style="width:20vw;">Clear</button>
                                <button type="submit" class="btn add-btn ms-2 py-3" style="width:20vw;">Update</button>
                            </form>

                            <% if(typeof message !=='undefined' ) { %>
                                <p style="color: red;">
                                    <%=message %>
                                </p>
                                <% } %>

        </section>

        <script>
            document.getElementById('add-size-stock').addEventListener('click', function () {
                const container = document.getElementById('size-stock-container');
                const newItem = document.createElement('div');
                newItem.className = 'size-stock-item d-flex mb-2';
                newItem.innerHTML = `
                    <input type="text" name="sizes[]" placeholder="Size" class="form-control me-2">
                    <input type="number" name="stocks[]" placeholder="Stock" class="form-control me-2">
                    <button type="button" class="btn btn-danger btn-remove-size-stock">Remove</button>
                `;
                container.appendChild(newItem);

                // Add event listener to the remove button
                newItem.querySelector('.btn-remove-size-stock').addEventListener('click', function () {
                    container.removeChild(newItem);
                });
            });

            // Attach remove event listener to existing size-stock items
            document.querySelectorAll('.btn-remove-size-stock').forEach(button => {
                button.addEventListener('click', function () {
                    const item = button.parentElement;
                    item.parentElement.removeChild(item);
                });
            });
        </script>
        <script>
            let imagesToDelete = [];

            function previewImg(event) {
                const image = URL.createObjectURL(event.target.files[0]);
                const imgPreview = document.getElementById('img' + event.target.id);
                imgPreview.src = image;
            }

            function deleteImg(imageId, imageType) {
                if (confirm('Are you sure you want to delete this image?')) {
                    imagesToDelete.push({ id: imageId, type: imageType });
                    document.getElementById('img' + imageId).remove();
                    document.getElementById('img-container-' + imageId).remove();
                }
            }

            document.querySelector('form').addEventListener('submit', function (event) {
                const hiddenInput = document.createElement('input');
                hiddenInput.type = 'hidden';
                hiddenInput.name = 'imagesToDelete';
                hiddenInput.value = JSON.stringify(imagesToDelete);
                this.appendChild(hiddenInput);
            });
        </script>

        <script>
            $(document).ready(function () {
                previewImg = (e) => {

                    let image = URL.createObjectURL(e.target.files[0]);
                    let imgPreview = document.getElementById('img' + e.target.id)
                    imgPreview.src = image;
                }

                let addImgCount = 0;
                addSecImage = () => {
                    const secImage = document.querySelector(".secondary-img");
                    const img = document.createElement("img");
                    img.setAttribute("src", "");
                    img.setAttribute("id", "img" + addImgCount);
                    img.setAttribute("style", "width: 5rem;");
                    img.setAttribute("class", "border rounded mt-1 mb-2");
                    secImage.appendChild(img);

                    const inpWrap = document.createElement("div");
                    inpWrap.setAttribute(
                        "class",
                        "col-sm-10 col-md-9 d-flex align-self-start"
                    );
                    secImage.appendChild(inpWrap);

                    const inp = document.createElement("input");
                    inp.setAttribute("type", "file");
                    inp.setAttribute("name", "images");
                    inp.setAttribute("accept", ".jpeg,.png,.jpg,.webp");
                    inp.setAttribute("class", "form-control mb-2 mt-3 prod-img");
                    inp.setAttribute("id", addImgCount);
                    inp.setAttribute(
                        "onchange",
                        previewImg(event, '${addImgCount}', 'prod_img_2')
                    );
                    inpWrap.appendChild(inp);

                    const dlt = document.createElement("i");
                    dlt.setAttribute("class", "fa-regular fa-circle-xmark m-3");
                    dlt.setAttribute("style", "cursor: pointer;")
                    dlt.setAttribute(
                        "onclick",
                        deleteImg('${addImgCount}', 'sec_img', '${addImgCount}')
                    );
                    inpWrap.appendChild(dlt);
                    addImgCount++;
                }
                //delete existing image
                deleteImg = (img_id, path, filename) => {
                    if (path == "secondary_img") {
                        changeProdImg.push(img_id);
                    }
                    document.getElementById("img" + filename).remove();
                    document.getElementById(filename).parentElement.remove();
                };
            })
        </script>




        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script>
                        document.write(new Date().getFullYear())
                    </script> ©Dude Men's Clothing
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-end">
                        All rights reserved
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script src="admin-assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="admin-assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="admin-assets/js/vendors/select2.min.js"></script>
    <script src="admin-assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="admin-assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="admin-assets/js/main.js" type="text/javascript"></script>
</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/page-form-product-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:33:32 GMT -->

</html>